# ğŸ Snake Animation GitHub Actions Workflow
# æ¯æ—¥GitHubã®è²¢çŒ®ã‚°ãƒ©ãƒ•ã‹ã‚‰Snakeã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è‡ªå‹•ç”Ÿæˆã—ã¦outputãƒ–ãƒ©ãƒ³ãƒã«Pushã™ã‚‹

name: ğŸ Generate Snake Animation

on:
  schedule:
    - cron: "0 0 * * *"  # æ¯æ—¥æ·±å¤œï¼ˆUTCï¼‰ã«è‡ªå‹•å®Ÿè¡Œã•ã‚Œã‚‹
  workflow_dispatch:      # å¿…è¦ã«å¿œã˜ã¦æ‰‹å‹•å®Ÿè¡Œã‚‚å¯èƒ½

jobs:
  build:
    name: Generate Snake Animation
    runs-on: ubuntu-latest  # GitHubãŒæä¾›ã™ã‚‹Ubuntuã®ä»®æƒ³ç’°å¢ƒã§å®Ÿè¡Œ

    steps:
      # ãƒªãƒã‚¸ãƒˆãƒªã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆï¼ˆå–å¾—ï¼‰ã™ã‚‹
      - name: Checkout the code
        uses: actions/checkout@v3

      - name: Prepare output directory
        run: mkdir -p dist

      # Snakeã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³SVGã‚’ç”Ÿæˆã™ã‚‹
      - name: Generate Snake SVG
        uses: Platane/snk@v3
        with:
          github_user_name: raiton-boo
          outputs: |
            dist/github-contribution-grid-snake.svg
            dist/github-contribution-grid-snake-dark.svg   # ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ç‰ˆ
        env:
          GH_PAT: ${{ secrets.SNAKE_TOKEN }}  # ã‚¢ãƒ‹ãƒ¡ç”Ÿæˆã«å¿…è¦ãªèªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³

      # ç”Ÿæˆã—ãŸSVGã‚’outputãƒ–ãƒ©ãƒ³ãƒã«Pushã—ã¦å…¬é–‹ã™ã‚‹
      - name: Push snake svg to output branch
        uses: crazy-max/ghaction-github-pages@v3
        with:
          target_branch: output      # å‡ºåŠ›å…ˆã®ãƒ–ãƒ©ãƒ³ãƒå
          build_dir: dist            # SVGãŒä¿å­˜ã•ã‚Œã¦ã„ã‚‹ãƒ•ã‚©ãƒ«ãƒ€
        env:
          GITHUB_TOKEN: ${{ secrets.SNAKE_TOKEN }}  # Pushç”¨ã®ãƒˆãƒ¼ã‚¯ãƒ³