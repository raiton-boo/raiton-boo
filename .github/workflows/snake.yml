# ğŸ Snake Animation GitHub Actions Workflow
# æ¯æ—¥GitHubã®è²¢çŒ®ã‚°ãƒ©ãƒ•ã‹ã‚‰Snakeã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è‡ªå‹•ç”Ÿæˆã—ã¦outputãƒ–ãƒ©ãƒ³ãƒã«Pushã™ã‚‹

name: ğŸ Generate Snake Animation

on:
  schedule:
    # æ¯æ—¥0:00 UTCï¼ˆ09:00 JSTï¼‰ã«è‡ªå‹•å®Ÿè¡Œã•ã‚Œã‚‹
    - cron: '0 0 * * *'
  workflow_dispatch: # å¿…è¦ã«å¿œã˜ã¦æ‰‹å‹•å®Ÿè¡Œã‚‚å¯èƒ½

# ãƒªãƒã‚¸ãƒˆãƒªã¸ã®å¤‰æ›´ã‚’Pushã™ã‚‹ãŸã‚ã®æ¨©é™ã‚’è¨­å®š
permissions:
  contents: write # ãƒªãƒã‚¸ãƒˆãƒªã®å†…å®¹ã«æ›¸ãè¾¼ã¿æ¨©é™ï¼ˆå¤‰æ›´ã‚’Pushã™ã‚‹ãŸã‚ï¼‰

jobs:
  build:
    name: Generate Snake Animation
    runs-on: ubuntu-latest

    steps:
      # ãƒªãƒã‚¸ãƒˆãƒªã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆï¼ˆå–å¾—ï¼‰ã™ã‚‹
      - name: Checkout the code
        uses: actions/checkout@v4

      # å‡ºåŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æº–å‚™ã™ã‚‹
      - name: Prepare output directory
        run: mkdir -p dist

      # Snakeã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³SVGï¼ˆãƒ©ã‚¤ãƒˆãƒ†ãƒ¼ãƒï¼‰ã‚’ç”Ÿæˆã™ã‚‹
      - name: Generate Snake SVG (light)
        uses: Platane/snk@v3
        with:
          github_user_name: raiton-boo
          outputs: dist/github-snake-light.svg?palette=github-light
        env:
          GITHUB_TOKEN: ${{ secrets.GIT_HUB_TOKEN }}

      # Snakeã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³SVGï¼ˆãƒ€ãƒ¼ã‚¯ãƒ†ãƒ¼ãƒï¼‰ã‚’ç”Ÿæˆã™ã‚‹
      - name: Generate Snake SVG (dark)
        uses: Platane/snk@v3
        with:
          github_user_name: raiton-boo
          outputs: dist/github-snake-dark.svg?palette=github-dark
        env:
          GITHUB_TOKEN: ${{ secrets.GIT_HUB_TOKEN }}

      # ç”Ÿæˆã—ãŸSVGã‚’outputãƒ–ãƒ©ãƒ³ãƒã«Pushã—ã¦å…¬é–‹ã™ã‚‹
      - name: Push snake svg to output branch
        uses: crazy-max/ghaction-github-pages@v4
        with:
          target_branch: output # å‡ºåŠ›å…ˆã®ãƒ–ãƒ©ãƒ³ãƒå
          build_dir: dist # SVGãŒä¿å­˜ã•ã‚Œã¦ã„ã‚‹ãƒ•ã‚©ãƒ«ãƒ€
        env:
          GITHUB_TOKEN: ${{ secrets.GIT_HUB_TOKEN }} # Pushç”¨ã®ãƒˆãƒ¼ã‚¯ãƒ³
